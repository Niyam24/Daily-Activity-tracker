<!DOCTYPE html>
<html>
<head>
    <title>Daily Activity Tracker</title>
    <style>
        body {
            font-family: Arial;
            background: #f4f4f4;
            padding: 30px;
        }
        h1 {
            text-align: center;
        }
        .activity {
            background: white;
            padding: 10px;
            margin: 8px;
            display: flex;
            justify-content: space-between;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<h1>✅ Daily Activity Tracker</h1>

<input id="newActivity" placeholder="New activity">
<button onclick="addActivity()">Add</button>

<div id="list"></div>

<script>
const API = "http://127.0.0.1:5000";

function loadActivities() {
    fetch(API + "/activities")
        .then(res => res.json())
        .then(data => {
            const list = document.getElementById("list");
            list.innerHTML = "";
            data.forEach(a => {
                list.innerHTML += `
                    <div class="activity">
                        <span>
                            <input type="checkbox" ${a.completed ? "checked" : ""}
                            onchange="toggle(${a.id}, this.checked)">
                            ${a.name}
                        </span>
                        <button onclick="remove(${a.id})">❌</button>
                    </div>
                `;
            });
        });
}

function addActivity() {
    const name = document.getElementById("newActivity").value;
    fetch(API + "/add", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({name})
    }).then(loadActivities);
}

function toggle(id, completed) {
    fetch(API + "/toggle", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({id, completed: completed ? 1 : 0})
    });
}

function remove(id) {
    fetch(API + "/delete", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({id})
    }).then(loadActivities);
}

loadActivities();
</script>

</body>
</html>
